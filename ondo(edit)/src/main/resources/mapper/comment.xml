<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace : 해당 mapper를 사용하는 DAO 정보 입력 -->
<mapper namespace="com.example.demo.comment.CommentDAO">

    <resultMap type="com.example.demo.comment.CommentTblVO" id="commentMap">
        <result property="regDate"    column="REGDATE" />
        <result property="userId"     column="USERID" />
        <result property="comments"   column="COMMENTS" />
        <result property="isbn"       column="ISBN" />
        <result property="rating"     column="RATING" />
    </resultMap>

    <select id="selectAllComment" resultMap="commentMap">
        SELECT * FROM COMMENT_TBL WHERE ISBN=#{isbn} 
    </select>

    <select id="selectOneCommentById" resultMap="commentMap">
        SELECT * FROM COMMENT_TBL WHERE ISBN=#{isbn} AND USERID=#{userId}
    </select>

    <insert id="insertOneComment">
        INSERT INTO COMMENT_TBL(REGDATE, USERID, COMMENTS, ISBN, RATING) VALUES
        (SYSDATE, #{userId}, #{comments}, #{isbn}, #{rating})
    </insert>
    
</mapper>